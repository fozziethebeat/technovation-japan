{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Airtable from 'airtable';\nimport { createSlice } from '@reduxjs/toolkit';\nimport Images from \"./assets/Images\";\n\nfunction readInitialState() {\n  var farmers, base;\n  return _regeneratorRuntime.async(function readInitialState$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          farmers = [];\n          base = new Airtable({\n            apiKey: process && process.env && process.env.AIRTABLE_API_KEY || \"keyOIGxfs3sOz7peI\"\n          }).base('appwPdl5QXUtRh8Rz');\n          base('Table 1').select({}).eachPage(function page(records, fetchNextPage) {\n            return _regeneratorRuntime.async(function page$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    records.map(function (record) {\n                      return {\n                        Name: record.get('Name'),\n                        Image: '',\n                        Username: record.get('Username'),\n                        Location: record.get('Location'),\n                        Favorites: record.get('Favorites').split(',')\n                      };\n                    }).forEach(function (m) {\n                      return farmesr.push(m);\n                    });\n                    fetchNextPage();\n\n                  case 2:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          }, function done(err) {\n            return _regeneratorRuntime.async(function done$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    console.log(err);\n                    console.log(farmers);\n\n                  case 2:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          });\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nvar initialState = [{\n  Name: 'Yuki Sano',\n  Image: Images.Farmer1,\n  Username: 'yusano',\n  Location: 'Nagano',\n  Favorites: ['cabbage', 'spinach']\n}, {\n  Name: 'Yuichiro Watanabe',\n  Image: Images.Farmer2,\n  Username: 'yuichinabe',\n  Location: 'Niigata',\n  Favorites: ['rice', 'pumpkin']\n}, {\n  Name: 'Megumi Yamada',\n  Image: Images.Farmer3,\n  Username: 'watermelon',\n  Location: 'Yamagata',\n  Favorites: ['garlic', 'onion']\n}];\nexport var farmerSlice = createSlice({\n  name: 'farmer',\n  initialState: initialState,\n  reducers: {\n    append: function append(state, farmer) {\n      console.log(farmer);\n      state.push(farmer.payload);\n    },\n    update: function update(state, username, farmer) {\n      for (var i = 0; i < state.length; ++i) {\n        if (state[i].Username == username) {\n          state[i] = _objectSpread(_objectSpread({}, farmer), state[i]);\n        }\n      }\n    }\n  }\n});\nvar _farmerSlice$actions = farmerSlice.actions,\n    append = _farmerSlice$actions.append,\n    update = _farmerSlice$actions.update;\nexport { append, update };\nexport default farmerSlice.reducer;","map":{"version":3,"sources":["/Users/fozziethebeat/devel/technovation-japan/nougyou-arigatou/react-native/final-version/farmerSlice.ts"],"names":["Airtable","createSlice","Images","readInitialState","farmers","base","apiKey","select","eachPage","page","records","fetchNextPage","map","record","Name","get","Image","Username","Location","Favorites","split","forEach","m","farmesr","push","done","err","console","log","initialState","Farmer1","Farmer2","Farmer3","farmerSlice","name","reducers","append","state","farmer","payload","update","username","i","length","actions","reducer"],"mappings":"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","sourcesContent":["import Airtable from 'airtable'\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport type { RootState } from '../../app/store'\n\nimport type { Farmer } from './types';\nimport Images from './assets/Images';\n\n\nasync function readInitialState() {\n  let farmers: Array<Farmer> = [];\n\nlet base = new Airtable({apiKey: process.env.AIRTABLE_API_KEY})\n  .base('appwPdl5QXUtRh8Rz');\nbase('Table 1').select({}).eachPage(\n  async function page(records, fetchNextPage) {\n    records.map(record => {\n      return {\n        Name: record.get('Name'),\n        Image: '',\n        Username: record.get('Username'),\n        Location: record.get('Location'),\n        Favorites: record.get('Favorites').split(',')\n      };\n    })\n    .forEach(m => farmesr.push(m));\n    fetchNextPage();\n  },\n  async function done(err) {\n    console.log(err);\n    console.log(farmers);\n  });\n}\n\nconst initialState: Array<Farmer> = [\n  {\n    Name: 'Yuki Sano',\n    Image: Images.Farmer1,\n    Username: 'yusano',\n    Location: 'Nagano', \n    Favorites: [ 'cabbage', 'spinach']\n  },\n  {\n    Name: 'Yuichiro Watanabe',\n    Image: Images.Farmer2,\n    Username: 'yuichinabe',\n    Location: 'Niigata',\n    Favorites: [ 'rice', 'pumpkin']\n  },\n  {\n    Name: 'Megumi Yamada',\n    Image: Images.Farmer3,\n    Username: 'watermelon',\n    Location: 'Yamagata',\n    Favorites: [ 'garlic', 'onion']\n  },\n];\n\nexport const farmerSlice = createSlice({\n  name: 'farmer',\n  initialState,\n  reducers: {\n    append: (state, farmer) => {\n      console.log(farmer);\n      state.push(farmer.payload);\n    },\n    update: (state, username, farmer) => {\n      for (var i =0; i < state.length; ++i) {\n        if (state[i].Username == username) {\n          state[i] = {\n            ...farmer,\n            ...state[i],\n          }\n        }\n      }\n    },\n  },\n});\n\nexport const { append, update } = farmerSlice.actions;\n\nexport default farmerSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}